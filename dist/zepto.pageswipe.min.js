vmwa(function(a){var b=function(b,c){var d=this,e=a(b),f,g,h,i,j,k={animationSpeed:150,easing:"swing",minSwipeLength:20,snapPosition:85,slideRightSelector:"#slideRight",slideLeftSelector:"#slideLeft",secondLayerSelector:"#nav",thirdLayerSelector:"#extra"};d.config={};var l=function(){d.config=a.extend(k,c||{}),d.state={touchesCount:0,startTouchXPosition:0,startTouchYPosition:0,deltaX:0,elementPosition:undefined,currentXTouchPosition:0,currentYTouchPosition:0,isScrolling:undefined},f=a(d.config.slideRightSelector),g=a(d.config.slideLeftSelector),h=a(d.config.secondLayerSelector),i=a(d.config.thirdLayerSelector),j=e.parent(),j.height(e.height()),m()},m=function(){e.on({touchstart:function(a){n(a)},touchmove:function(a){o(a)},touchcancel:function(a){q(a)},touchend:function(a){p(a)}}),window.navigator.msPointerEnabled&&e.on({MSPointerCancel:function(a){q(a.originalEvent)},MSPointerDown:function(a){n(a.originalEvent)},MSPointerMove:function(a){o(a.originalEvent)},MSPointerOut:function(a){q(a.originalEvent)},MSPointerUp:function(a){p(a.originalEvent)}}),f.on({click:function(a){j.hasClass("rightSwipe")?t("center"):t("right")}}),g.on({click:function(a){j.hasClass("leftSwipe")?t("center"):t("left")}})},n=function(b){var c=d.state;c.touchesCount=b.touches.length,c.touchesCount==1?(c.isScrolling=undefined,c.deltaX=0,c.startTouchXPosition=b.touches[0].pageX,c.startTouchYPosition=b.touches[0].pageY,typeof c.elementPosition=="undefined"&&(c.elementPosition=a(e).position().left)):q(b)},o=function(a){var b=d.state,c=0;if(b.touchesCount==1){b.currentXTouchPosition=a.touches[0].pageX,b.currentYTouchPosition=a.touches[0].pageY,b.deltaX=b.currentXTouchPosition-b.startTouchXPosition;var f=b.currentYTouchPosition-b.startTouchYPosition;typeof b.isScrolling=="undefined"&&(b.isScrolling=!!(b.isScrolling||Math.abs(b.deltaX)<Math.abs(f))),b.isScrolling?b.elementPosition!==0&&a.preventDefault():(a.preventDefault(),c=b.elementPosition+b.deltaX,c<0&&h.css("left",c),e.css("left",c))}else q(a)},p=function(a){var b=d.state;if(!b.isScrolling&&b.deltaX!==0&&b.touchesCount==1&&b.currentXTouchPosition!==0){var c=e.width(),f=c*(d.config.minSwipeLength/100);Math.abs(b.deltaX)>f?b.elementPosition===0?b.deltaX>0?t("right"):t("left"):t("center"):b.elementPosition<0?t("left"):b.elementPosition>0?t("right"):t("center")}else q(a)},q=function(b){state=d.state,state.elementPosition!=state.currentXTouchPosition&&s(),state=a.extend(state,{currentXTouchPosition:0,currentYTouchPosition:0})},r=function(){return Math.round(e.width()*d.config.snapPosition/100)},s=function(a){var b=d.state,c;b.elementPosition===0?c="center":b.elementPosition<0?c="left":c="right",t(c)},t=function(a){a=typeof a=="undefined"?"center":a;var b=0;a!="center"&&(b=r(),a=="left"&&(b*=-1)),a=="left"&&u(h,b),u(e,b),a=="center"&&u(h,b),j.removeClass("leftSwipe centerSwipe rightSwipe").addClass(a+"Swipe")},u=function(a,b){return a.animate({left:b},d.config.animationSpeed,d.config.easing,function(){d.state.elementPosition=b})};l()};a.fn.swipeable=function(c){return this.each(function(){var d=a(this);if(d.data("swipeable"))return;var e=new b(this,c);d.data("swipeable",e)})}})(Zepto);